
# Distributed Performance Testing Orchestrator

---

DPTO is an accelerator template developed to facilitate the rapid deployment and scaling of distributed performance testing workflows. It works with Jmeter to distribute your load amongst multiple slaves, helping user with an automated setup and execution of their Jmeter tests in a master-slave architecture. 

## ğŸš€ Features

- Distributed Architecture: Supports scalable load generation across multiple nodes.
- Modular Design: Structured for flexibility and ease of integration into existing CI/CD pipelines.
- Automated Execution: The framework enables user to run their jmeter tests in an automated setup where user does not have to do any manual setup
- Minimal Configuration: The user can run the framework by providing minimum information and let the framework do the setup and execution 

---

## ğŸ“ Project Structure

```
distributed-performance-testing/
â”œâ”€â”€ config/                # Configuration files for test setups
â”œâ”€â”€ src/                   # Source code and scripts
â”œâ”€â”€ test-files/            # Sample JMeter test plans and related assets
â”œâ”€â”€ .env.template          # Environment variable template
â”œâ”€â”€ Dockerfile             # Docker image definition
â”œâ”€â”€ docker-compose.yml     # Docker Compose configuration
â”œâ”€â”€ package.json           # Node.js project metadata
â””â”€â”€ README.md              # Project documentation
```

---

## ğŸ“¦ Installation

### 1. Clone the Repository

```bash
git clone https://github.com/NashTech-Labs/distributed-performance-testing.git
cd distributed-performance-testing
```

### 2. Configure Environment Variables
Copy the .env.template to .env and modify the variables as needed.

```bash
cp .env.template .env 
```

### 3. Install npm packages

```bash
npm install
```

### 4. (Optional. Only run if no server/container setup is already present) Build and Start the Containers
You only need to do this step if you do not have a server setup of your own to run the project. If you just want to test this project out and do not have any servers or containers already set up of your own, then please run the following commands as well. 

```bash
docker-compose up --build
```
---

##  Running Tests

### Prepare Test Plans:

Place your JMeter .jmx test plans into the test-files/ directory.â€‹

### Execute Tests:

Run "node index.js" to start the execution

### Monitor Results:

Access logs and reports generated by JMeter to analyze performance metrics in \test-files folder

---

## ğŸ’¡ Google Cloud Compute Engine (GCE) Setup (Optional)
You can now run the project in Google Cloud using a single GCE VM. It runs master, slaves, and reporting all within a single VM using Docker. This is the only supported GCE integration mode at the moment.

### Prerequisites:

- Create a GCP account with a project and enable Compute Engine

### To Create a GCE Instance with Everything Preinstalled:

Before creating the instance, initialize gcloud CLI:

```bash
./google-cloud-sdk/bin/gcloud init
```

Then, run the script to launch a GCE instance with everything set up:

```bash
./create-single-node.sh
```

This will:

- Launch an Ubuntu-based VM
- Run the setup script
  - Install Docker, Node.js, and required dependencies
  - Clone this repo into the VM
- Wait until setup is completed or any error found

 ### To Delete the GCE Instance:

```bash
 ./delete-active-instance.sh
```

---

## Running Tests

Log into the GCE instance using the command provided at the end of the script that launched the instance. The repository will already be cloned during instance creation.

Navigate to the project directory:

```bash
cd distributed-performance-testing-gce
```

From here, follow the usual installation and test execution steps as mentioned above.

---

## ğŸ“ Notes

- If you face SSH or Docker permission issues in GCE, ensure your user has appropriate access or rerun commands with sudo.


